name: 'Snake GitHub Contribution Graph'
description: 'Generate an animated SVG showing a snake eating GitHub contributions using advanced pathfinding algorithms'
author: 'diverger'

branding:
  icon: 'activity'
  color: 'green'

inputs:
  github_user_name:
    description: 'GitHub username'
    required: true
  github_token:
    description: 'GitHub token used to fetch the contribution calendar. Defaults to the action token if empty.'
    required: false
    default: ''
  outputs:
    description: |
      List of SVG files to generate.
      One file per line. Each output can be customized with options as query string.

      Supported query string options:
      - palette:      A preset of color, one of [github, github-dark, github-light]
      - color_snake:  Color of the snake
      - color_dots:   Comma separated list of dots color.
                      The first one is 0 contribution, then it goes from the low contribution to the highest.
                      Exactly 5 colors are expected.

      Example:
        outputs: |
          dark.svg?palette=github-dark&color_snake=blue
          light.svg?color_snake=#7845ab
          ocean.svg?color_snake=orange&color_dots=#bfd6f6,#8dbdff,#64a1f4,#4b91f1,#3c7dd9
    required: false
    default: 'snake.svg'
  show_contribution_counter:
    description: 'Show contribution counter with progress bar (requires counter_displays to be set)'
    required: false
    default: 'false'
  counter_displays:
    description: |
      JSON array of multiple counter displays. Each display can have different position, text, colors.

      Example:
        [{
          "position": "top-left",
          "text": "GitHub Contributions",
          "color": "#58a6ff",
          "fontSize": 16
        }, {
          "position": "top-right",
          "prefix": "Total: ",
          "showCount": true,
          "showPercentage": false,
          "color": "#7ee787"
        }, {
          "position": "follow",
          "prefix": "ðŸŽ¯ ",
          "suffix": " commits",
          "color": "#ffa657"
        }]

      Fields:
      - position: 'top-left' | 'top-right' | 'follow' (required)
        - 'top-left': Fixed at left edge
        - 'top-right': Right-aligned, clamped to canvas width to prevent overflow
        - 'follow': Follows progress bar head
      - text: Fixed text to display (if set, count/percentage are ignored)
      - prefix, suffix: Text around count/percentage
      - showCount, showPercentage: Control what to display (default: both true)
      - fontSize, fontFamily, color: Styling options
    required: false

outputs:
  svg_path:
    description: 'Path to the generated SVG file'
  moves_count:
    description: 'Total number of moves in the snake path'
  cells_eaten:
    description: 'Number of contribution cells consumed'

runs:
  using: 'docker'
  image: 'docker://diverger/gh-magic-matrix-snake:latest'